(this["webpackJsonpgogo-react"]=this["webpackJsonpgogo-react"]||[]).push([[17],{1057:function(e,a,t){"use strict";t.r(a);var n=t(103),s=t(5),c=t.n(s),l=t(234),r=t(40),o=t(164),i=t.n(o),m=t(236),d=t(104),u=t(1),p=t(224),b=t(438),g=t(439),f=t(179),v=t(180),E=t(77),h=t(98),N=t.n(h),C=t(101),x=t(462);var j=Object(l.c)(Object(r.b)(({chatApp:e})=>({contacts:e.contacts,allContacts:e.allContacts,conversations:e.conversations,loadingConversations:e.loadingConversations,loadingContacts:e.loadingContacts,currentUser:e.currentUser}),{changeConversationAction:u.eb,createConversationAction:u.jb,searchContactAction:u.ub})(({intl:e,activeTab:a,toggleAppMenu:t,contacts:l,allContacts:r,conversations:o,loadingConversations:m,loadingContacts:d,currentUser:u,changeConversationAction:h,createConversationAction:j,searchContactAction:w})=>{const y=Object(s.useState)(""),O=Object(n.a)(y,2),T=O[0],M=O[1],k=e=>{M(e),e.length>0?("contacts"!==a&&t("contacts"),w(e)):w("")},A=e.messages;return c.a.createElement(x.a,null,c.a.createElement(p.a,{className:"pl-0 pr-0"},c.a.createElement(b.a,{tabs:!0,className:"card-header-tabs ml-0 mr-0"},c.a.createElement(g.a,{className:"w-50 text-center"},c.a.createElement(E.b,{to:"#",location:{},className:N()({active:"messages"===a,"nav-link":!0}),onClick:()=>{return a!==(e="messages")&&t(e),void("messages"===e&&k(""));var e}},c.a.createElement(C.a,{id:"chat.messages"}))),c.a.createElement(g.a,{className:"w-50 text-center"},c.a.createElement(E.b,{to:"#",location:{},className:N()({active:"contacts"===a,"nav-link":!0}),onClick:()=>t("contacts")},c.a.createElement(C.a,{id:"chat.contacts"}))))),c.a.createElement("div",{className:"pt-4 pr-4 pl-4 pb-0"},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"text",className:"form-control rounded",placeholder:A["menu.search"],value:T,onChange:e=>k(e.target.value)}))),c.a.createElement(f.a,{activeTab:a,className:"chat-app-tab-content"},c.a.createElement(v.a,{tabId:"messages",className:"chat-app-tab-pane"},c.a.createElement(i.a,{options:{suppressScrollX:!0,wheelPropagation:!1}},c.a.createElement("div",{className:"pt-2 pr-4 pl-4 pb-2"},d&&m&&o.map((e,a)=>{const t=r.find(a=>a.id===e.users.find(e=>e!==u.id));return c.a.createElement("div",{key:a,className:"d-flex flex-row mb-1 border-bottom pb-3 mb-3"},c.a.createElement(E.b,{className:"d-flex",to:"#",location:{},onClick:e=>{return a=t.id,h(a),void k("");var a}},c.a.createElement("img",{alt:t.name,src:t.thumb,className:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall"}),c.a.createElement("div",{className:"d-flex flex-grow-1 min-width-zero"},c.a.createElement("div",{className:"pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},c.a.createElement("div",{className:"min-width-zero"},c.a.createElement("p",{className:" mb-0 truncate"},t.name),c.a.createElement("p",{className:"mb-1 text-muted text-small"},e.lastMessageTime))))))})))),c.a.createElement(v.a,{tabId:"contacts",className:"chat-app-tab-pane"},c.a.createElement(i.a,{options:{suppressScrollX:!0,wheelPropagation:!1}},c.a.createElement("div",{className:"pt-2 pr-4 pl-4 pb-2"},d&&l.filter(e=>e.id!==u.id).map((e,n)=>c.a.createElement("div",{key:n,className:"d-flex flex-row mb-3 border-bottom pb-3"},c.a.createElement(E.b,{className:"d-flex",to:"#",location:{},onClick:()=>(e=>{"messages"!==a&&(t("messages"),w(""));o.find(a=>a.users.includes(u.id)&&a.users.includes(e))||j(u.id,e,o),h(e)})(e.id)},c.a.createElement("img",{alt:e.name,src:e.thumb,className:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall"}),c.a.createElement("div",{className:"d-flex flex-grow-1 min-width-zero"},c.a.createElement("div",{className:"m-2 pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},c.a.createElement("div",{className:"min-width-zero"},c.a.createElement("p",{className:"mb-0 truncate"},e.name))))))))))))}));var w=c.a.memo(({name:e,thumb:a,lastSeenDate:t})=>c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"d-flex flex-row chat-heading"},c.a.createElement("div",{className:"d-flex"},c.a.createElement("img",{alt:e,src:a,className:"img-thumbnail border-0 rounded-circle ml-0 mr-4 list-thumbnail align-self-center small"})),c.a.createElement("div",{className:" d-flex min-width-zero"},c.a.createElement("div",{className:"card-body pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},c.a.createElement("div",{className:"min-width-zero"},c.a.createElement("div",null,c.a.createElement("p",{className:"list-item-heading mb-1 truncate "},e)),c.a.createElement("p",{className:"mb-0 text-muted text-small"},"0"===t?"-":t))))),c.a.createElement("div",{className:"separator mb-5"}))),y=t(110),O=t(114);var T=c.a.memo(({sender:e,item:a,currentUserid:t})=>c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,{className:"d-inline-block mb-3 float-".concat(a.sender!==t?"left":"right")},c.a.createElement("div",{className:"position-absolute  pt-1 pr-2 r-0"},c.a.createElement("span",{className:"text-extra-small text-muted"},a.time)),c.a.createElement(O.a,null,c.a.createElement("div",{className:"d-flex flex-row pb-1"},c.a.createElement("img",{alt:e.name,src:e.thumb,className:"img-thumbnail border-0 rounded-circle mr-3 list-thumbnail align-self-center xsmall"}),c.a.createElement("div",{className:" d-flex flex-grow-1 min-width-zero"},c.a.createElement("div",{className:"m-2 pl-0 align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero"},c.a.createElement("div",{className:"min-width-zero"},c.a.createElement("p",{className:"mb-0 truncate list-item-heading"},e.name))))),c.a.createElement("div",{className:"chat-text-left"},c.a.createElement("p",{className:"mb-0 text-semi-muted"},a.text)))),c.a.createElement("div",{className:"clearfix"}))),M=t(444),k=t(220);var A=c.a.memo(({placeholder:e,messageInput:a,handleChatInputPress:t,handleChatInputChange:n,handleSendButtonClick:s})=>c.a.createElement("div",{className:"chat-input-container d-flex justify-content-between align-items-center"},c.a.createElement(M.a,{className:"form-control flex-grow-1",type:"text",placeholder:e,value:a,onKeyPress:e=>t(e),onChange:e=>n(e)}),c.a.createElement("div",null,c.a.createElement(k.a,{outline:!0,color:"primary",className:"icon-button large ml-1"},c.a.createElement("i",{className:"simple-icon-paper-clip"})),c.a.createElement(k.a,{color:"primary",className:"icon-button large ml-1",onClick:()=>s()},c.a.createElement("i",{className:"simple-icon-arrow-right"})))));a.default=Object(l.c)(Object(r.b)(({chatApp:e})=>({allContacts:e.allContacts,conversations:e.conversations,loadingConversations:e.loadingConversations,loadingContacts:e.loadingContacts,currentUser:e.currentUser,selectedUser:e.selectedUser,selectedUserId:e.selectedUserId}),{getContactsAction:u.mb,getConversationsAction:u.nb,changeConversationAction:u.eb,addMessageToConversationAction:u.db})(({intl:e,allContacts:a,conversations:t,loadingConversations:l,loadingContacts:r,currentUser:o,selectedUser:u,selectedUserId:p,getContactsAction:b,getConversationsAction:g,changeConversationAction:f,addMessageToConversationAction:v})=>{const E=Object(s.useState)("messages"),h=Object(n.a)(E,2),N=h[0],C=h[1],x=Object(s.useState)(""),y=Object(n.a)(x,2),O=y[0],M=y[1],k=Object(s.useRef)(null);Object(s.useEffect)(()=>{document.body.classList.add("no-footer");return b(),g(0),()=>{document.body.classList.remove("no-footer")}},[b,g]);const P=()=>{setTimeout(()=>{k.current&&(k.current._ps.element.scrollTop=k.current._ps.contentHeight)},100)};Object(s.useEffect)(()=>{l&&r&&null==u&&(f(p),P())},[f,r,l,u,p]),Object(s.useEffect)(()=>{P()},[p]);const I=e.messages,U=l&&r&&u?t.find(e=>e.users.includes(o.id)&&e.users.includes(u.id)):null;return l&&r?c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,{className:"app-row"},c.a.createElement(d.a,{xxs:"12",className:"chat-app"},l&&u&&c.a.createElement(w,{name:u.name,thumb:u.thumb,lastSeenDate:u.lastSeenDate}),U&&c.a.createElement(i.a,{ref:k,options:{suppressScrollX:!0,wheelPropagation:!1}},U.messages.map((e,t)=>{const n=a.find(a=>a.id===e.sender);return c.a.createElement(T,{key:t,sender:n,item:e,currentUserid:o.id})})))),c.a.createElement(A,{placeholder:I["chat.saysomething"],messageInput:O,handleChatInputPress:e=>{"Enter"===e.key&&O.length>0&&(v(o.id,u.id,O,t),M(""),C("messages"),P())},handleChatInputChange:e=>{M(e.target.value)},handleSendButtonClick:()=>{O.length>0&&(v(o.id,u.id,O,t),M(""),C("messages"),P())}}),c.a.createElement(j,{activeTab:N,toggleAppMenu:C})):c.a.createElement("div",{className:"loading"})}))},110:function(e,a,t){"use strict";var n=t(10),s=t(14),c=t(5),l=t.n(c),r=t(24),o=t.n(r),i=t(98),m=t.n(i),d=t(99),u={tag:d.tagPropType,inverse:o.a.bool,color:o.a.string,body:o.a.bool,outline:o.a.bool,className:o.a.string,cssModule:o.a.object,innerRef:o.a.oneOfType([o.a.object,o.a.string,o.a.func])},p=function(e){var a=e.className,t=e.cssModule,c=e.color,r=e.body,o=e.inverse,i=e.outline,u=e.tag,p=e.innerRef,b=Object(s.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),g=Object(d.mapToCssModules)(m()(a,"card",!!o&&"text-white",!!r&&"card-body",!!c&&(i?"border":"bg")+"-"+c),t);return l.a.createElement(u,Object(n.a)({},b,{className:g,ref:p}))};p.propTypes=u,p.defaultProps={tag:"div"},a.a=p},114:function(e,a,t){"use strict";var n=t(10),s=t(14),c=t(5),l=t.n(c),r=t(24),o=t.n(r),i=t(98),m=t.n(i),d=t(99),u={tag:d.tagPropType,className:o.a.string,cssModule:o.a.object,innerRef:o.a.oneOfType([o.a.object,o.a.string,o.a.func])},p=function(e){var a=e.className,t=e.cssModule,c=e.innerRef,r=e.tag,o=Object(s.a)(e,["className","cssModule","innerRef","tag"]),i=Object(d.mapToCssModules)(m()(a,"card-body"),t);return l.a.createElement(r,Object(n.a)({},o,{className:i,ref:c}))};p.propTypes=u,p.defaultProps={tag:"div"},a.a=p},121:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var n=t(5),s=t.n(n).a.createContext({})},179:function(e,a,t){"use strict";var n=t(10),s=t(16),c=t(5),l=t.n(c),r=t(24),o=t.n(r),i=t(98),m=t.n(i),d=t(121),u=t(99),p={tag:u.tagPropType,activeTab:o.a.any,className:o.a.string,cssModule:o.a.object},b=function(e){function a(a){var t;return(t=e.call(this,a)||this).state={activeTab:t.props.activeTab},t}return Object(s.a)(a,e),a.getDerivedStateFromProps=function(e,a){return a.activeTab!==e.activeTab?{activeTab:e.activeTab}:null},a.prototype.render=function(){var e=this.props,a=e.className,t=e.cssModule,s=e.tag,c=Object(u.omit)(this.props,Object.keys(p)),r=Object(u.mapToCssModules)(m()("tab-content",a),t);return l.a.createElement(d.a.Provider,{value:{activeTabId:this.state.activeTab}},l.a.createElement(s,Object(n.a)({},c,{className:r})))},a}(c.Component);a.a=b,b.propTypes=p,b.defaultProps={tag:"div"}},180:function(e,a,t){"use strict";t.d(a,"a",(function(){return b}));var n=t(10),s=t(14),c=t(5),l=t.n(c),r=t(24),o=t.n(r),i=t(98),m=t.n(i),d=t(121),u=t(99),p={tag:u.tagPropType,className:o.a.string,cssModule:o.a.object,tabId:o.a.any};function b(e){var a=e.className,t=e.cssModule,c=e.tabId,r=e.tag,o=Object(s.a)(e,["className","cssModule","tabId","tag"]),i=function(e){return Object(u.mapToCssModules)(m()("tab-pane",a,{active:c===e}),t)};return l.a.createElement(d.a.Consumer,null,(function(e){var a=e.activeTabId;return l.a.createElement(r,Object(n.a)({},o,{className:i(a)}))}))}b.propTypes=p,b.defaultProps={tag:"div"}},224:function(e,a,t){"use strict";var n=t(10),s=t(14),c=t(5),l=t.n(c),r=t(24),o=t.n(r),i=t(98),m=t.n(i),d=t(99),u={tag:d.tagPropType,className:o.a.string,cssModule:o.a.object},p=function(e){var a=e.className,t=e.cssModule,c=e.tag,r=Object(s.a)(e,["className","cssModule","tag"]),o=Object(d.mapToCssModules)(m()(a,"card-header"),t);return l.a.createElement(c,Object(n.a)({},r,{className:o}))};p.propTypes=u,p.defaultProps={tag:"div"},a.a=p},462:function(e,a,t){"use strict";var n=t(103),s=t(5),c=t.n(s),l=t(688);a.a=({children:e})=>{const a=Object(s.useRef)(),t=Object(s.useState)(!1),r=Object(n.a)(t,2),o=r[0],i=r[1],m=e=>{if(o){const t=a.current;if(t.contains(e.target)||t===e.target)return;i(!1)}};return Object(s.useEffect)(()=>(["click","touchstart"].forEach(e=>document.addEventListener(e,m,!1)),()=>{["click","touchstart"].forEach(e=>document.removeEventListener(e,m,!1))}),[o]),c.a.createElement("div",{ref:a,className:"app-menu ".concat(o?"shown":"")},e,c.a.createElement(l.a,{className:"app-menu-button d-inline-block d-xl-none",onClick:()=>i(!o)},c.a.createElement("i",{className:"simple-icon-options"})))}}}]);